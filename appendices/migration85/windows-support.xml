<?xml version="1.0" encoding="utf-8"?>
<!-- EN-Revision: ec45af749649dc0d6a23eaedeed1b601f7460813 Maintainer: mowangjuanzi Status: ready -->
<sect1 xml:id="migration85.windows-support">
 <title>Windows 支持</title>

 <sect2 xml:id="migration85.windows-support.core">
  <title>核心</title>

  <simpara>
   配置变量 <constant>PHP_VERSION</constant>、<constant>PHP_MINOR_VERSION</constant> 和
   <constant>PHP_RELEASE_VERSION</constant> 现在始终为数值类型。此前，在使用 buildconf 构建时，这些变量为字符串类型。
  </simpara>

  <simpara>
   <command>phpize</command> 构建现在会在构建目录中反映源代码树结构（与树内构建的行为保持一致）；部分扩展的构建方式（尤其是使用 Makefile.frag.w32 时）可能需要相应调整。
  </simpara>

  <simpara>
   MSVC 构建现已支持 <option role="configure">--enable-sanitizer</option>
   选项。该选项启用 ASan 和调试断言，要求 MSVC 16.10 及以上版本和 Windows 10。
  </simpara>

  <simpara>
   不再支持针对 clang 构建的 <option role="configure">--with-uncritical-warn-choke</option>
   配置选项，应改用 CFLAGS 指定需抑制的警告。
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.windows-support.com">
  <title>COM</title>

  <simpara>
   该扩展现在默认以共享方式构建；此前默认为静态扩展，尽管官方 Windows 二进制版本一直采用共享扩展。
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.windows-support.ffi">
  <title>FFI</title>

  <simpara>
   使用 <methodname>FFI::cdef</methodname> 和 <methodname>FFI::load</methodname> 时不再需要指定库。但此便捷功能不建议在生产环境中使用。
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.windows-support.streams">
  <title>Stream</title>

  <simpara>
   如果 <parameter>$read</parameter> 数组仅包含管道流，且 <parameter>$write</parameter> 和 <parameter>$except</parameter>
   数组为空，<function>stream_select</function> 现在的行为与 POSIX
   系统一致，即函数仅在至少有一个管道可读或超时到期时才返回。此前，<function>stream_select</function> 会立即返回，并报告所有流均处于可读状态。
  </simpara>

 </sect2>

</sect1>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
